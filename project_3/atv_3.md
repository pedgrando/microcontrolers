# Prática 3

Nessa última prática, objetivou-se utilizar o microcontrolador PIC18F4550 para ler sinais analógicos controlados por um potenciometro, simulando um sensor de temperatura, discretizá-los com o uso de um ADC e expor os valores em um display LCD. Os códigos reunidos nesta pasta, de autoria do docente, aglutinam dois exemplos práticos nesse sentido.

Antes de comentar o código e a simulação, é interessante apontar conceitos interessantes e cruciais em relação ao uso dos periféricos citados acima. Primeiramente, o conversor analógico-digital é uma ferramente que, pela própria teoria de sinais, possue uma resolução intrínseca, relacionada ao número de bits para conversão, no nosso caso 10 bits. Isso limita os valores representáveis, bem como a sensibilidade à mudanças, uma vez que dado uma faixa de tensões de entrada analógica, só haverão 1024 (de 0 a 1023) correspondências discretas; i.e., dada uma alimentação de 0-5V, os valores representáveis estarão atrelados à sensibilidade de 10mV. Em segundo lugar, é preciso se atentar ao tempo de amostragem e à frequência do clock de conversão, o primeiro que é de 12 TADs e o segundo que deve se adequar a esse tempo. Por fim, é preciso lembrar que o display LCD utilizado nesse código está na configuração de 4 bits, o que significa que o envio de um caractér no padrão ANSII, com 8 bits, deve ser feito em duas partes.

Partindo agora para os códigos, é interessante comentar as configurações feitas para o uso dos periféricos nos exemplos, principalmente no que diz respeito ao ADC e ao LCD. No primeiro caso, configurou-se, nos registradores ADCON0, ADCON1 e ADCON2, um pino de entrada analógico, A0 e A5 para os exemplos 10, respectivamente, definiu-se a utilização de tensões Vcc e Vss internas (5 e 0 V, em ordem), justificou-se a saída, que é dividida em dois registradores (ADRESH e ADRESL) à direita, de forma que os bits sigam a ordem natural de distribuição, armazendo os bits menos significativos em ADRESL e os mais em ADRESH, adotou-se um frequência de oscilação de 1/32 do clock (corresponde a um período entre 2 e 25 micro segundos) e um período de conversão de 12 TADs, conforme o que foi calculado na disciplina. No exemplo 11, foi configurado manualmente o registrador ADCON1, mas o resto foi configurado através da função ADC_init(). Também foram utilizadas, em ambos os casos, bibliotecas padrões para o kit EasyPIC v7 que configuram o display LCD e fazem o envio de dados, de forma otimizada.

Foi também elaborada uma simulação mostrada abaixo no software SimulIDE, na qual foi carregado o código do exemplo 11 e se fez algumas execuções de teste. Note que no exemplo 11, os valores expostos no display ficam limitados entre 12.34 e 0. A pinagem do LCD foi conectada segundo as expecificações do fabricante da placa, que disponibilizou as bibliotecas.


![alt text]()
